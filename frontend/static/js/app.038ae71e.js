(function(e){function t(t){for(var a,i,s=t[0],c=t[1],u=t[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"1fad":function(e,t,n){},2:function(e,t){},"213f":function(e,t,n){},2677:function(e,t,n){"use strict";var a=n("9b43"),r=n.n(a);r.a},4143:function(e,t,n){},4360:function(e,t,n){"use strict";var a=n("2b0e"),r=n("2f62"),o=(n("a4d3"),n("e01a"),n("caad"),n("b0c0"),n("d3b7"),n("ac1f"),n("2532"),n("3ca3"),n("1276"),n("498a"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),i=n("bc3a"),s=n.n(i),c=n("24f8"),u={namespaced:!0,state:{token:null,user:null,cert:null,cert_id:null,ca_info:null,name:null,password:null},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_PASSWORD:function(e,t){e.password=t},SET_NAME:function(e,t){e.name=t},SET_USER:function(e,t){e.user={firstname:t.first_name,lastname:t.last_name,email:t.email}},SET_CERT_ID:function(e,t){e.cert_id=t},SET_CERT:function(e,t){e.cert=t},SET_CA_INFO:function(e,t){e.ca_info=t}},getters:{authenticated:function(e){return e.token&&e.user},admin:function(e){return e.token&&e.user&&"1"==e.user.admin},ca_info:function(e){return e.ca_info},user:function(e){return e.user},cert_id:function(e){return e.cert_id},cert:function(e){return e.cert}},actions:{refresh_token:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.dispatch,r={},""!=document.cookie&&(r={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),n.next=5,s.a.post("/refresh_token/",{token:t},r);case 5:if(o=n.sent,!o.data.refresh_token){n.next=14;break}return i={},""!=document.cookie&&(i={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),n.next=11,s.a.post("/new_token/",{refresh_token:c.data.refresh_token},i);case 11:if(c=n.sent,!c.data.token){n.next=14;break}return n.abrupt("return",a("attempt",c.data.token));case 14:case"end":return n.stop()}}),n)})))()},login:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.dispatch,r=e.commit,n.prev=1,o={},""!=document.cookie&&(o={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),n.next=6,s.a.post("/login/",t,o);case 6:if(i=n.sent,!i.status||200==i.status){n.next=11;break}return n.abrupt("return");case 11:if(!i.data){n.next=14;break}return r("SET_PASSWORD",t.password),n.abrupt("return",a("attempt",i.data.access_token));case 14:n.next=20;break;case 16:return n.prev=16,n.t0=n["catch"](1),console.log("Login error: ",n.t0),n.abrupt("return");case 20:case"end":return n.stop()}}),n,null,[[1,16]])})))()},login_cert:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.dispatch,console.log("cert",t),r=new c.Agent({cert:"cert",key:"key",ca:"ca",passphrase:"passphrase"}),console.log(r),n.next=6,s.a.post("/login_cert/",{httpsAgent:r});case 6:if(o=n.sent,console.log(o),!o.data){n.next=10;break}return n.abrupt("return",a("attempt",o.data.access_token));case 10:case"end":return n.stop()}}),n)})))()},update_ca_info:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,a=e.getters,!a.admin||!a.authenticated){t.next=8;break}return r={},""!=document.cookie&&(r={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),t.next=6,s.a.get("/status_cert/",r);case 6:o=t.sent,n("SET_CA_INFO",o.data);case 8:case"end":return t.stop()}}),t)})))()},attempt:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,r=e.state,t&&a("SET_TOKEN",t),r.token){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,o={},""!=document.cookie&&(o={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),n.next=9,s.a.get("/userinfo/",o);case 9:if(i=n.sent,a("SET_USER",i.data),!i.data.admin){n.next=18;break}return c={},""!=document.cookie&&(c={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),n.next=16,s.a.get("/status_cert/",c);case 16:u=n.sent,a("SET_CA_INFO",u.data);case 18:n.next=24;break;case 20:n.prev=20,n.t0=n["catch"](4),a("SET_TOKEN",null),a("SET_USER",null);case 24:case"end":return n.stop()}}),n,null,[[4,20]])})))()},edit:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,o=e.state,n.prev=1,i={},""!=document.cookie&&(i={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),n.next=6,s.a.post("/update/",{last_name:t.lastname,first_name:t.firstname,email:t.email,token:o.token},i);case 6:if(c=n.sent,!c.status||200!=c.status){n.next=12;break}return a("SET_NAME",t.firstname),n.abrupt("return",r("attempt"));case 12:return n.abrupt("return");case 13:n.next=22;break;case 15:if(n.prev=15,n.t0=n["catch"](1),!n.t0.response.data.description||!n.t0.response.data.description.includes("token is expired")){n.next=21;break}return n.abrupt("return",r("refresh_token",o.token).then((function(){return r("edit",t)})));case 21:return n.abrupt("return");case 22:case"end":return n.stop()}}),n,null,[[1,15]])})))()},generate_cert:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,a=e.state,console.log("generate_cert"),r={},""!=document.cookie&&(r={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),t.next=6,s.a.post("/generate_cert/",{token:a.token},r);case 6:if(o=t.sent,console.log(o.status,o),!o.status||200!=o.status){t.next=11;break}return console.log(o.data),t.abrupt("return",n("generate_attempt",o.data));case 11:case"end":return t.stop()}}),t)})))()},generate_attempt:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,r=e.state,t&&a("SET_CERT_ID",t),r.cert_id){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,o={},""!=document.cookie&&(o={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1)),"Content-Type":"multipart/form-data"}}),i=new FormData,i.append("certificate",t.archive),i.append("token",r.token),n.next=12,s.a.post("/verify_cert/",i,o);case 12:c=n.sent,a("SET_CERT",c.data.certif),n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](4),a("SET_CERT",null),a("SET_CERT_ID",null);case 20:case"end":return n.stop()}}),n,null,[[4,16]])})))()},download_cert:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,console.log("download_cert"),t&&a("SET_CERT_ID",t),n.prev=3,r={},""!=document.cookie&&(r={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),n.next=8,s.a.post("/download_cert/",t,r).then((function(e){var t=JSON.stringify(e.data),n=new Blob([t],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download="cert.pkcs",a.click(),URL.revokeObjectURL(a.href)})).catch(console.error);case 8:o=n.sent,a("SET_CERT",o.data.certif),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](3),a("SET_CERT",null),a("SET_CERT_ID",null);case 16:case"end":return n.stop()}}),n,null,[[3,12]])})))()},revoke_cert:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,console.log("revoke_cert"),a={},""!=document.cookie&&(a={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),t.next=6,s.a.post("/revoke_cert/",{},a);case 6:r=t.sent,r.status&&200==r.status&&(n("SET_CERT_ID",null),n("SET_CERT",null));case 8:case"end":return t.stop()}}),t)})))()},signout:function(e){var t=e.commit,n=e.state;try{var a={};return""!=document.cookie&&(a={headers:{"X-CSRFToken":decodeURIComponent(document.cookie.split(";")[0].trim().substring("csfrtoken".length+1))}}),s.a.post("/logout/",{token:n.token},a).then((function(){t("SET_TOKEN",null),t("SET_NAME",null),t("SET_USER",null),t("SET_CERT_ID",null),t("SET_CERT",null),t("SET_CA_INFO",null)}))}catch(r){console.log(r),t("SET_TOKEN",null),t("SET_NAME",null),t("SET_USER",null),t("SET_CERT_ID",null),t("SET_CERT",null),t("SET_CA_INFO",null)}}}};a["a"].use(r["a"]);t["a"]=new r["a"].Store({state:{},mutations:{},actions:{},modules:{auth:u}})},"4bd6":function(e,t,n){"use strict";var a=n("1fad"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Navigator"),n("router-view")],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("router-link",{attrs:{to:{name:"home"}}},[e._v(" Home ")])],1),e.admin?[n("li",[n("router-link",{attrs:{to:{name:"admin"}}},[e._v(" CA Administration ")])],1)]:e._e(),e.authenticated?[n("li",[n("router-link",{attrs:{to:{name:"dashboard"}}},[e._v(" Dashboard ")])],1),n("li",{staticClass:"right"},[e._v(" Welcome "+e._s(e.user.firstname)+" ")]),n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.signout(t)}}},[e._v("Sign out")])])]:[n("li",[n("router-link",{attrs:{to:{name:"login"}}},[e._v(" Login ")])],1)]],2)},s=[],c=(n("ac1f"),n("5319"),n("5530")),u=n("2f62"),l={computed:Object(c["a"])({},Object(u["c"])({authenticated:"auth/authenticated",user:"auth/user",admin:"auth/admin"})),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])({signoutAction:"auth/signout"})),{},{signout:function(){var e=this;this.signoutAction().then((function(){e.$router.replace({name:"home"})})).catch((function(){e.$router.replace({name:"home"})}))}})},d=l,m=(n("8940"),n("2877")),f=Object(m["a"])(d,i,s,!1,null,"ceb613c0",null),p=f.exports,h={components:{Navigator:p}},_=h,v=Object(m["a"])(_,r,o,!1,null,null,null),b=v.exports,g=n("8c4f"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"bgimg"},[n("div",{staticClass:"topleft"}),n("div",{staticClass:"middle"},[n("h1",[e._v("Wellcome to iMovies CERT page")]),n("hr"),e.authenticated?[e.admin?[n("router-link",{attrs:{to:{name:"admin"}}},[e._v(" CA Administration ")])]:e._e(),n("router-link",{attrs:{to:{name:"dashboard"}}},[e._v(" Dashboard ")])]:[n("router-link",{attrs:{to:{name:"login"}}},[e._v(" Login ")])]],2),n("div",{staticClass:"bottomleft"})])])},T=[],C={name:"Home",components:{},computed:Object(c["a"])({},Object(u["c"])({authenticated:"auth/authenticated",admin:"auth/admin"}))},E=C,w=(n("ddf6"),Object(m["a"])(E,k,T,!1,null,"e5881df2",null)),R=w.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard"},[e._v(" "+e._s(e.cert_id)+" "+e._s(e.cert)+" "),n("form",{on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"con"},[n("header",{staticClass:"head-form"},[n("h2",[e._v("Dashboard")]),n("p",{staticClass:"fail",style:{display:e.fail_edit?"block":"none"}},[e._v(" Edit failed try again later ")]),n("p",{staticClass:"fail",style:{display:e.fail_generate?"block":"none"}},[e._v(" CERT generation failed try again later ")]),n("p",{staticClass:"fail",style:{display:e.fail_download?"block":"none"}},[e._v(" CERT download failed try again later or generate the CERT first ")]),n("p",{staticClass:"correct",style:{display:e.correct?"block":"none"}},[e._v(" Operation executed correctly ")])]),n("br"),n("div",{staticClass:"field-set"},[n("div",[n("label",{attrs:{for:"firstname"}},[e._v("First Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.firstname,expression:"userinfo.firstname"}],staticClass:"form-input",attrs:{type:"text",name:"firstname",id:"firstname"},domProps:{value:e.userinfo.firstname},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"firstname",t.target.value)}}})]),n("div",[n("label",{attrs:{for:"lastname"}},[e._v("Last Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.lastname,expression:"userinfo.lastname"}],staticClass:"form-input",attrs:{type:"text",name:"lastname",id:"lastname"},domProps:{value:e.userinfo.lastname},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"lastname",t.target.value)}}})]),n("div",[n("label",{attrs:{for:"email"}},[e._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.email,expression:"userinfo.email"}],staticClass:"form-input",attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.userinfo.email},on:{input:function(t){t.target.composing||e.$set(e.userinfo,"email",t.target.value)}}})]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"log.in",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.edit_info(t)}}},[e._v(" Edit ")]),n("button",{staticClass:"log.in",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.generate_cert(t)}}},[e._v(" Generate CERT ")])]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"log.in",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.download_cert(t)}}},[e._v(" Download CERT ")]),n("button",{staticClass:"log.in",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.revoke_cert(t)}}},[e._v(" Revoke CERT ")])])])])])])},O=[],y={name:"dashboard",components:{},computed:Object(c["a"])({},Object(u["c"])({authenticated:"auth/authenticated",computedinfo:"auth/user",cert_id:"auth/cert_id",cert:"auth/cert"})),created:function(){this.userinfo.lastname=this.computedinfo.lastname,this.userinfo.firstname=this.computedinfo.firstname,this.userinfo.email=this.computedinfo.email},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])({edit:"auth/edit",generate:"auth/generate_cert",download:"auth/download_cert",revoke:"auth/revoke_cert"})),{},{edit_info:function(){var e=this,t={firstname:this.userinfo.firstname,lastname:this.userinfo.lastname,email:this.userinfo.email};this.edit(t).then((function(){e.correct=!0,setTimeout((function(){return e.correct=!1}),5e3),e.userinfo.lastname=e.computedinfo.lastname,e.userinfo.firstname=e.computedinfo.firstname,e.userinfo.email=e.computedinfo.email})).catch((function(){e.fail_edit=!0,setTimeout((function(){return e.fail_edit=!1}),5e3)}))},generate_cert:function(){var e=this;this.generate().then((function(){e.correct=!0,setTimeout((function(){return e.correct=!1}),5e3),console.log("OK")})).catch((function(){e.fail_generate=!0,setTimeout((function(){return e.fail_generate=!1}),5e3)}))},download_cert:function(){var e=this;this.cert_id?this.download(this.cert_id).then((function(){e.correct=!0,setTimeout((function(){return e.correct=!1}),5e3)})).catch((function(){e.fail_download=!0,setTimeout((function(){return e.fail_download=!1}),5e3)})):(this.fail_download=!0,setTimeout((function(){return e.fail_download=!1}),5e3))},revoke_cert:function(){var e=this;this.revoke().then((function(){e.correct=!0,setTimeout((function(){return e.correct=!1}),5e3),console.log("OK")})).catch((function(){e.fail_generate=!0,setTimeout((function(){return e.fail_generate=!1}),5e3)}))}}),data:function(){return{userinfo:{},fail_edit:!1,fail_download:!1,fail_generate:!1,correct:!1}}},x=y,j=(n("2677"),Object(m["a"])(x,S,O,!1,null,"34b1991f",null)),I=j.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"con"},[n("header",{staticClass:"head-form"},[n("h2",[e._v("Log In")]),n("p",{staticClass:"fail",style:{visibility:e.fail?"visible":"hidden"}},[e._v("Incorrect credentials try again")])]),n("br"),n("div",{staticClass:"field-set"},[n("div",[n("label",{attrs:{for:"email"}},[e._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.auth.email,expression:"auth.email"}],staticClass:"form-input",attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.auth.email},on:{input:function(t){t.target.composing||e.$set(e.auth,"email",t.target.value)}}})]),n("div",[n("label",{attrs:{for:"password"}},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.auth.password,expression:"auth.password"}],staticClass:"form-input",attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.auth.password},on:{input:function(t){t.target.composing||e.$set(e.auth,"password",t.target.value)}}})]),n("div",[n("button",{staticClass:"log.in",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Login")])]),n("div",[n("button",{staticClass:"log.in",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submit_cert(t)}}},[e._v("Login with cert")])])])])])},A=[],D={name:"login",components:{},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])({login:"auth/login",login_cert:"auth/login_cert"})),{},{submit:function(){var e=this;this.fail=!1;var t={username:this.auth.email,password:this.auth.password};this.login(t).then((function(){e.$router.replace({name:"dashboard"})})).catch((function(){e.fail=!0}))},submit_cert:function(){var e=this;this.fail=!1;var t={username:this.auth.email};this.login_cert(t).then((function(){e.$router.replace({name:"dashboard"})})).catch((function(){e.fail=!0}))}}),data:function(){return{auth:{email:"",password:""},fail:!1}}},U=D,F=(n("4bd6"),Object(m["a"])(U,N,A,!1,null,"7434fa1e",null)),$=F.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"con"},[e._m(0),n("br"),n("div",{staticClass:"field-set"},[n("div",[n("label",{attrs:{for:"issued"}},[e._v("Issued certificates")]),n("p",{attrs:{id:"issued"}},[e._v(" "+e._s(e.ca_info.issued)+" ")])]),n("div",[n("label",{attrs:{for:"revoked"}},[e._v("Revoked certificates")]),n("p",{attrs:{id:"revoked"}},[e._v(" "+e._s(e.ca_info.revoked)+" ")])]),n("div",[n("label",{attrs:{for:"serial"}},[e._v("Current serial number")]),n("p",{attrs:{id:"serial"}},[e._v(" "+e._s(e.ca_info.serial)+" ")])])])])])},L=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"head-form"},[n("h2",[e._v("CA Administrator")])])}],X={name:"Admin",components:{},computed:Object(c["a"])({},Object(u["c"])({ca_info:"auth/ca_info"})),methods:Object(c["a"])({},Object(u["b"])({update_ca_info:"auth/update_ca_info"})),created:function(){var e=this;setInterval((function(){e.update_ca_info()}),3e3)}},M=X,K=(n("f697"),Object(m["a"])(M,P,L,!1,null,"3b721667",null)),W=K.exports,J=n("4360");a["a"].use(g["a"]);var z=[{path:"/static/index.html",name:"home",component:R},{path:"/",name:"home",component:R},{path:"/index.html",name:"home",component:R},{path:"/login",name:"login",component:$},{path:"/dashboard",name:"dashboard",component:I,beforeEnter:function(e,t,n){if(!J["a"].getters["auth/authenticated"])return n({name:"login"});n()}},{path:"/admin",name:"admin",component:W,beforeEnter:function(e,t,n){return J["a"].getters["auth/admin"]?J["a"].getters["auth/authenticated"]?void n():n({name:"login"}):J["a"].getters["auth/authenticated"]?n({name:"dashboard"}):n({name:"login"})}}],H=new g["a"]({mode:"history",base:"/",routes:z}),B=H,G=n("bc3a"),q=n.n(G);n("66c6"),q.a.defaults.baseURL="/",a["a"].config.productionTip=!1,J["a"].dispatch("auth/attempt",localStorage.getItem("token")).then((function(){J["a"].dispatch("auth/generate_attempt",localStorage.getItem("cert_id")).then((function(){new a["a"]({router:B,store:J["a"],render:function(e){return e(b)}}).$mount("#app")}))}))},"66c6":function(e,t,n){"use strict";n.r(t);var a=n("4360"),r=n("bc3a"),o=n.n(r);a["a"].subscribe((function(e){switch(e.type){case"auth/SET_TOKEN":e.payload?(o.a.defaults.headers.common["Authorization"]="".concat(e.payload),localStorage.setItem("token",e.payload)):(o.a.defaults.headers.common["Authorization"]=null,localStorage.removeItem("token",e.payload));break;case"auth/SET_CERT_ID":e.payload?localStorage.setItem("cert_id",e.payload):(localStorage.removeItem("cert_id",e.payload),localStorage.removeItem("cert",e.payload));break;case"auth/SET_CERT":e.payload?localStorage.setItem("cert",e.payload):localStorage.removeItem("cert",e.payload);break;case"auth/SET_CA_INFO":console.log("set_ca_info");break;default:break}}))},7189:function(e,t,n){},8940:function(e,t,n){"use strict";var a=n("4143"),r=n.n(a);r.a},"9b43":function(e,t,n){},ddf6:function(e,t,n){"use strict";var a=n("213f"),r=n.n(a);r.a},f697:function(e,t,n){"use strict";var a=n("7189"),r=n.n(a);r.a}});
//# sourceMappingURL=app.038ae71e.js.map